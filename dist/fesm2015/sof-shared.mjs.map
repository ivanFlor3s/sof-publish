{"version":3,"file":"sof-shared.mjs","sources":["../../../projects/sof-shared/src/lib/components/sof-dropdown/sof-dropdown.component.ts","../../../projects/sof-shared/src/lib/components/sof-dropdown/sof-dropdown.component.html","../../../projects/sof-shared/src/lib/configurations/keycloak-configurations.ts","../../../projects/sof-shared/src/lib/sof-shared.module.ts","../../../projects/sof-shared/src/lib/guards/auth.guard.ts","../../../projects/sof-shared/src/lib/services/keycloak-event.service.ts","../../../projects/sof-shared/src/public-api.ts","../../../projects/sof-shared/src/sof-shared.ts"],"sourcesContent":["import { Component, Input, OnInit } from '@angular/core';\r\nimport {animate,state,style,AUTO_STYLE,transition,trigger} from '@angular/animations'\r\n\r\nconst DEFAULT_DURATION = 300;\r\n\r\n\r\n@Component({\r\n  selector: 'sh-sof-dropdown',\r\n  templateUrl: './sof-dropdown.component.html',\r\n  styleUrls: ['./sof-dropdown.component.scss'],\r\n  animations:[\r\n    trigger('collapse',[\r\n      state('false',style({ height: AUTO_STYLE, visibility: AUTO_STYLE })),\r\n      state('true', style({ height: '0', visibility: 'hidden' })),\r\n      transition('false => true', animate(DEFAULT_DURATION + 'ms ease-in')),\r\n      transition('true => false', animate(DEFAULT_DURATION + 'ms ease-out'))\r\n    ])\r\n  ]\r\n})\r\n\r\nexport class SofDropdownComponent implements OnInit {\r\n\r\n  /**\r\n   * El componente tiene un input ```collapsed``` que por default tiene el valor en ```false```\r\n      - collapsed en false, indica que el contenido no esta collapsado por lo que la primera vez que se muestre el componente se va a mostrar todo el contenido\r\n      - collapsed en true, se renderiza el componente con el contenido oculto\r\n   */\r\n  @Input() collapsed:boolean = false\r\n\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  toggleExpand(){\r\n    this.collapsed = !this.collapsed\r\n  }\r\n\r\n}\r\n","<div class=\"header-container\">\r\n  <a class=\"header-toggler\" (click)=\"toggleExpand()\">\r\n    <div class=\"drop-down-icon\">\r\n      <span class=\"material-icons\" [class.collapse-icon]=\"!collapsed\">\r\n        arrow_drop_down_circle\r\n      </span>\r\n    </div>\r\n    <ng-content select=\"[headerClickeable]\"></ng-content>\r\n  </a>\r\n  <ng-content select=\"[header]\"></ng-content>\r\n</div>\r\n\r\n<div class=\"content-collapsible\" \r\n    [@collapse]=\"collapsed\" \r\n     >\r\n  <ng-content select=\"[content]\"></ng-content>\r\n</div>\r\n","export class KeycloakConfigurations {\r\n    ip: string;\r\n    port: number;\r\n    realm: string;\r\n    clientId: string;\r\n}","import { HTTP_INTERCEPTORS } from '@angular/common/http';\r\nimport { APP_INITIALIZER, ModuleWithProviders, NgModule } from '@angular/core';\r\nimport { KeycloakBearerInterceptor, KeycloakService } from 'keycloak-angular';\r\n\r\n//Componentes\r\nimport { SofDropdownComponent } from './components/sof-dropdown/sof-dropdown.component';\r\nimport { KeycloakConfigurations } from './configurations/keycloak-configurations';\r\n\r\n// Configuracion Keycloak\r\nfunction initializeKeycloak(keycloak: KeycloakService, configurations: KeycloakConfigurations) {\r\n  return () => {\r\n    keycloak.init({\r\n      config: {\r\n        url: `http://${configurations.ip}:${configurations.port}/auth`,\r\n        realm: configurations.realm,\r\n        clientId: configurations.clientId\r\n      },\r\n      initOptions: {\r\n        onLoad: 'login-required',\r\n        silentCheckSsoRedirectUri:\r\n          window.location.origin + '/assets/silent-check-sso.html',\r\n        \r\n      },\r\n      bearerExcludedUrls: ['/assets'], \r\n    });\r\n  };\r\n}\r\n\r\n@NgModule({\r\n  declarations: [\r\n    SofDropdownComponent\r\n  ],\r\n  imports: [\r\n\r\n  ],\r\n  exports: [\r\n    SofDropdownComponent\r\n  ],\r\n  providers: [\r\n    KeycloakService,\r\n    {\r\n      provide: APP_INITIALIZER,\r\n      useFactory: initializeKeycloak,\r\n      multi: true,\r\n      deps: [KeycloakService, KeycloakConfigurations]\r\n    },\r\n    {\r\n      provide: HTTP_INTERCEPTORS,\r\n      useClass: KeycloakBearerInterceptor,\r\n      multi: true\r\n    },\r\n  ],\r\n})\r\nexport class SofSharedModule {\r\n  static forRoot(\r\n    keycloakConfigurations: KeycloakConfigurations\r\n  ): ModuleWithProviders<SofSharedModule> {\r\n    return {\r\n      ngModule: SofSharedModule,\r\n      providers: [\r\n        {\r\n          provide: KeycloakConfigurations,\r\n          useValue: keycloakConfigurations,\r\n        }\r\n      ],\r\n    };\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport {\r\n  ActivatedRouteSnapshot,\r\n  Router,\r\n  RouterStateSnapshot\r\n} from '@angular/router';\r\nimport { KeycloakAuthGuard, KeycloakService } from 'keycloak-angular';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class AuthGuard extends KeycloakAuthGuard {\r\n  constructor(\r\n    protected override readonly router: Router,\r\n    protected readonly keycloak: KeycloakService\r\n  ) {\r\n    super(router, keycloak);\r\n  }\r\n\r\n  public async isAccessAllowed(\r\n    route: ActivatedRouteSnapshot,\r\n    state: RouterStateSnapshot\r\n  ): Promise<boolean> {\r\n    const keycloakInstance = this.keycloak.getKeycloakInstance();\r\n\r\n    return new Promise<boolean>(resolve => {\r\n      keycloakInstance.onReady = async (authenticated) => {\r\n        if (!authenticated) {\r\n          await this.keycloak.login({\r\n            redirectUri: window.location.origin + state.url\r\n          });\r\n          resolve(false);\r\n          return;\r\n        }\r\n        resolve( true );\r\n      };\r\n    });\r\n  }\r\n}","import { Injectable } from '@angular/core';\r\nimport { KeycloakEvent, KeycloakEventType, KeycloakService } from 'keycloak-angular';\r\nimport { Observable } from 'rxjs';\r\nimport { Subject } from 'rxjs';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class KeycloakEventService {\r\n\r\n    keyCloakEventSubject$: Subject<KeycloakEvent>;\r\n\r\n    constructor(private keycloakService: KeycloakService) {\r\n        this.keyCloakEventSubject$ = keycloakService.keycloakEvents$;\r\n\r\n        this.keyCloakEventSubject$.subscribe({\r\n            next: (e) => {\r\n                if (e.type == KeycloakEventType.OnTokenExpired) {\r\n                    // keycloakService.updateToken(20);\r\n                    keycloakService.updateToken();\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    GetObservable(): Observable<KeycloakEvent> {\r\n        return this.keyCloakEventSubject$.asObservable();\r\n    }\r\n\r\n}\r\n","/*\r\n * Public API Surface of sof-shared\r\n */\r\n\r\nexport * from './lib/sof-shared.module';\r\n\r\nexport * from './lib/components'\r\n\r\nexport * from './lib/guards/auth.guard';\r\nexport * from './lib/configurations/keycloak-configurations';\r\nexport * from './lib/services/keycloak-event.service';","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["i1"],"mappings":"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"}